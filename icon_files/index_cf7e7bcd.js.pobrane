!function(e,t){"use strict";!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else{var o=t();for(var i in o)("object"==typeof exports?exports:e)[i]=o[i]}}(t,(function(){return function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="https://assets.allegrostatic.com/opbox-modal/",o(o.s=0)}({0:function(e,t,o){e.exports=o("O14P")},O14P:function(e,o,i){i.r(o);var n=function(e,t){(e||t)&&t.split(" ").forEach((function(t){e.classList.add(t)}))},a=function(e,t){(e||t)&&t.split(" ").forEach((function(t){e.classList.remove(t)}))},s="data-modal-overlay",r='data-role="modal"',l='data-role="modal-body"',c='data-role="modal-content-container"';function d(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var u=27,y=function(){function e(o){var i=this,n=o.baseNode,a=o.props,d=o.targetWindow,y=void 0===d?t:d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"showModalByAPI",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};i.visible||(i.onDismiss=e,i.showModal(),i.window.opbox.analytics.sendBoxInteractionEvent({contextNode:i.modalNode,label:"modalAPI",value:"open"}))})),h(this,"hideModalByAPI",(function(){i.visible&&(i.hideModal(),i.onDismiss&&(i.onDismiss(),i.onDismiss=null),i.window.opbox.analytics.sendBoxInteractionEvent({contextNode:i.modalNode,label:"modalAPI",value:"close"}))})),h(this,"handleHashChange",(function(){var e=i.getLocationHash();if(i.visible&&!e)return i.hideModal(),void i.handleHashChangeAnalytics(i.actionTypeValue.close);i.visible||e!==i.triggerHash||(i.showModal(),i.handleHashChangeAnalytics(i.actionTypeValue.open))})),h(this,"onKeyDown",(function(e){e.keyCode===u&&i.visible&&(e.preventDefault(),i.window.opbox.analytics.sendBoxInteractionEvent({contextNode:i.baseNode,label:"modalClose_escKey"}),i.hideModal())})),h(this,"onDocumentClick",(function(e){e.target===i.overlayNode&&(i.window.opbox.analytics.sendBoxInteractionEvent({contextNode:i.overlayNode,label:"modalClose_overlay"}),i.hideModal())})),h(this,"toggleVisibility",(function(){return i.visible?i.hideModal():i.showModal()})),this.window=y,this.bodyNode=this.window.document.querySelector("body"),this.baseNode=n,this.modalNode=this.baseNode.querySelector("[".concat(r,"]")),this.contentNode=this.baseNode.querySelector("[".concat(c,"]")),this.overlayNode=this.baseNode.querySelector("[".concat(s,"]")),this.scrollContainer=this.baseNode.querySelector("[".concat(l,"]")),this.showOnlyOnceADay=a.showOnlyOnceADay,this.boxName=a.boxName,this.triggerHash=a.triggerLinkUrl,this.showInitially=a.showInitially,this.visibilityPreference=a.visibilityPreference,this.visible=!1,this.actionTypeValue={open:"open",close:"close"}}var o,i,y;return o=e,y=[{key:"getCurrentDate",value:function(){var e=new Date;return"".concat(e.getDate()).concat(e.getMonth()).concat(e.getYear())}}],(i=[{key:"getLocationHash",value:function(){return this.window.location.hash}},{key:"reportVisibility",value:function(){if(this.visibilityPreference){var e=this.visibilityPreference,t=e.key,o=e.value;this.window.opbox.preferences.set(t,o)}}},{key:"showModal",value:function(){this.visible=!0,n(this.modalNode,"_6a774_wsSIT"),n(this.bodyNode,"_6a774_3OKOS"),this.window.opbox.boxViewsMarker.recursivelyMarkBoxAsVisible(this.contentNode),this.reportVisibility()}},{key:"hideModal",value:function(){if(this.visible=!1,a(this.modalNode,"_6a774_wsSIT"),a(this.bodyNode,"_6a774_3OKOS"),this.window.opbox.boxViewsMarker.recursivelyMarkBoxAsHidden(this.contentNode),this.getLocationHash()===this.triggerHash){var e=this.window.location,t=e.pathname,o=e.search;this.window.history.replaceState("",this.window.document.title,"".concat(t).concat(o))}}},{key:"handleHashChangeAnalytics",value:function(e){this.window.opbox.analytics.sendBoxInteractionEvent({contextNode:this.overlayNode,label:e===this.actionTypeValue.open?"modalOpen":"modalClose",value:"hashChange"})}},{key:"attachListeners",value:function(){var e,t=this;(e=this.baseNode.querySelectorAll('[data-role="modal-trigger"]'),function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).forEach((function(e){return e.addEventListener("click",t.toggleVisibility)})),this.window.addEventListener("keydown",this.onKeyDown),this.window.addEventListener("click",this.onDocumentClick),this.window.addEventListener("hashchange",this.handleHashChange)}},{key:"setLastSeenDate",value:function(e){this.window.localStorage.setItem(this.boxName,e)}},{key:"getLastSeenDate",value:function(){return this.window.localStorage.getItem(this.boxName)}},{key:"showModalInitially",value:function(){if(this.getLocationHash()===this.triggerHash||this.showInitially){if(this.showOnlyOnceADay){var t=e.getCurrentDate();if(this.getLastSeenDate()===t)return;this.setLastSeenDate(t)}this.showModal()}}},{key:"onMount",value:function(){this.attachListeners(),this.window.opbox.boxViewsMarker.trackBoxScroll(this.scrollContainer),this.window.opboxModal.register({boxName:this.boxName,showModal:this.showModalByAPI,hideModal:this.hideModalByAPI}),this.showModalInitially()}}])&&d(o.prototype,i),y&&d(o,y),e}();t.opboxModal=new function(){var e=this;this.instances={},this.register=function(t){var o=t.boxName,i=t.showModal,n=t.hideModal;e.instances[o]={showModal:i,hideModal:n}},this.open=function(t,o){var i=e.instances[t];i&&i.showModal(o)},this.close=function(t){var o=e.instances[t];o&&o.hideModal()}},t.opbox.component.register({prototypeName:"allegro.modal"},y)}})}))}(0,"undefined"!=typeof window?window:global);