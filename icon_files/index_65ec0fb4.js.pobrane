!function(e,t){"use strict";!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(t,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="https://assets.allegrostatic.com/opbox-search/",r(r.s=0)}({"+qE3":function(e,t,r){var n,s="object"==typeof Reflect?Reflect:null,i=s&&"function"==typeof s.apply?s.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var c=10;function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var s,i,a;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]),void 0===a)a=i[t]=r,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(s=u(e))>0&&a.length>s&&!a.warned){a.warned=!0;var o=Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,console&&console.warn&&console.warn(o)}return e}function h(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=h.bind(n);return s.listener=r,n.wrapFn=s,s}function f(e,t,r){var n=e._events;if(void 0===n)return[];var s=n[t];return void 0===s?[]:"function"==typeof s?r?[s.listener||s]:[s]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(s):g(s,s.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var u=c.length,l=g(c,u);for(r=0;r<u;++r)i(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,s,i,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(s=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,s=i;break}if(s<0)return this;0===s?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,s),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var s,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(s=i[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},0:function(e,t,r){e.exports=r("O14P")},Ievl:function(e,t,r){t.htmlEscape=function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.htmlUnescape=function(e){return e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},t.htmlEscapeTag=function(e){for(var r=e[0],n=0;n<(arguments.length<=1?0:arguments.length-1);n++)r=r+t.htmlEscape((n+1<1||arguments.length<=n+1?void 0:arguments[n+1])+"")+e[n+1];return r},t.htmlUnescapeTag=function(e){for(var r=e[0],n=0;n<(arguments.length<=1?0:arguments.length-1);n++)r=r+t.htmlUnescape((n+1<1||arguments.length<=n+1?void 0:arguments[n+1])+"")+e[n+1];return r}},O14P:function(e,r,n){n.r(r);var s={};n.r(s),n.d(s,"arrow",(function(){return Lt})),n.d(s,"arrowhead",(function(){return Rt})),n.d(s,"bag",(function(){return It})),n.d(s,"bell",(function(){return At})),n.d(s,"calendar",(function(){return Nt})),n.d(s,"card",(function(){return Dt})),n.d(s,"cashTransfer",(function(){return Ft})),n.d(s,"chat",(function(){return Mt})),n.d(s,"document",(function(){return Ht})),n.d(s,"download",(function(){return qt})),n.d(s,"edit",(function(){return zt})),n.d(s,"fourSquares",(function(){return Ut})),n.d(s,"home",(function(){return Bt})),n.d(s,"information",(function(){return Yt})),n.d(s,"magnifyingGlass",(function(){return Kt})),n.d(s,"mailOpen",(function(){return Gt})),n.d(s,"menu",(function(){return Qt})),n.d(s,"minus",(function(){return Wt})),n.d(s,"parcelWithPin",(function(){return Vt})),n.d(s,"playButton",(function(){return Jt})),n.d(s,"plus",(function(){return Xt})),n.d(s,"question",(function(){return Zt})),n.d(s,"starEmpty",(function(){return $t})),n.d(s,"starFull",(function(){return er})),n.d(s,"threeDots",(function(){return tr})),n.d(s,"thumbDown",(function(){return rr})),n.d(s,"thumbUp",(function(){return nr})),n.d(s,"trashBin",(function(){return sr})),n.d(s,"user",(function(){return ir})),n.d(s,"walletClock",(function(){return ar})),n.d(s,"x",(function(){return or}));var i=n("+qE3"),a=n.n(i),o={USERS:"users",USER_NAME:"user_name",CATEGORY:"category",CATEGORY_REDIRECT:"category_redirect",DEPARTMENT:"department",ENDED:"ended",ALL:"all",AD:"ad",PHRASE:"phrase",RECENTLY_TYPED_PHRASE:"recently-typed-phrase",PHRASE_IN_CATEGORY:"phrase_in_category",MULTISEARCH:"multisearch",OTHER:"OTHER",PRODUCT:"product"};function c(e){return new Promise((function(t,r){e.ok?t(e.json()):r({status:e.status})}))}var u={displayedFilterChanged:"filters-displayedFilter-changed",recentUrl:"filters-recentUrl-changed"},l={isFocusedChanged:"search-isExpanded-changed",phraseChanged:"search-phrase-changed",phrasesChanged:"search-phrases-changed",searchInDescriptionsChanged:"search-in-descriptions-changed"},h={isExpandedChanged:"suggester-isExpanded-changed",listChanged:"suggester-list-changed",activeIndexChanged:"suggester-activeIndex-changed"},d={filters:u,search:l,suggester:h},f=n("Ievl"),p="/listing",g=function(e){return"".concat("/kategoria").concat(e)},v="_d25db_3CTT3",y="_d25db_1HtwQ",b="_d25db_1ot3t",m="_d25db_3SRuC",k="_d25db_1Z6Yd",w="_d25db_2ho4d",E="_d25db_1LKf1",_="_d25db_2Huqd",C="_d25db_2Fz16";function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;x(e.querySelectorAll(".".concat(y," ").concat(t))).forEach((function(e){return e.addEventListener(r,n)}))}var S=function(e,t){return x(document.querySelectorAll(t)).some((function(t){return t.contains(e)}))};function T(e){return Object.keys(e).reduce((function(t,r){var n,s=e[r];switch(O(s)){case"object":n=T(e[r]);break;case"string":n=s.toLowerCase();break;default:n=s}return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){P(e,t,r[t])}))}return e}({},t,P({},r,n))}),{})}function L(e){var t=e.phrase;return t||(t=e.type===o.AD?e.name:""),Object(f.htmlUnescape)(t.replace(/<\/?b>/g,"").trim())}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.categoryAlias,r=e.name,n=e.id,s=e.type,i=e.redirectUrl,a=e.child;return{name:r,id:"0"!==n?n:void 0,alias:t,url:e.url||(t?g("/".concat(t)):p),type:s.toLowerCase(),redirectUrl:i,child:a}}function I(e){var t=e.toLowerCase();return t===o.USERS||t===o.ENDED||t===o.MULTISEARCH}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N="recentlyTypedPhrases_context";function D(){return(JSON.parse(t.localStorage.getItem(N))||[]).map((function(e){var t;try{t=Object(f.htmlEscape)(decodeURIComponent(e.phrase))}catch(e){t=null}return null===t?null:e})).filter((function(e){return null!==e}))}function F(e,t){var r=e[t];return e.filter((function(e){return e.phrase!==r.phrase||e.context!==r.context}))}function M(){var e="recentlyTypedPhrases-localStorageTest";try{return t.localStorage.setItem(e,e),t.localStorage.removeItem(e),!0}catch(e){return!1}}function H(){return M()?D().map((function(e){var t=e.phrase,r=e.context,n=r.type,s=r.name,i=r.url,a=r.id,o=r.child;return{phrase:Object(f.htmlEscape)(decodeURIComponent(t)),recentlyTypedPhrase:!0,type:n.toLowerCase(),name:s,url:i,id:a,child:o}})):[]}function q(e){var t=Object.assign({},e);return t.recentlyTypedPhrase&&(t.type="recently-typed--".concat(o.ALL===t.type.toLowerCase()?o.PHRASE:t.type)),t}function z(e){var t=e.config,r=(t=void 0===t?{}:t).searchInDescriptionsEnabled,n=e.filters,s=(n=void 0===n?{}:n).checkedFilter,i=(s=void 0===s?{}:s).type;return r&&!I(void 0===i?"":i)}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.suggester,r=(t=void 0===t?{}:t).list,n=t.isExpanded,s=e.search,i=(s=void 0===s?{}:s).phrases,a=void 0===i?[]:i;return(z(e)||r.length>0)&&!n||a.length>0}function B(e){return this.suggestionsRequestCounter<=e}function Y(e){var r=this,n=e.value,s=e.categoryId,i=e.suggestionsRequestCounter,a=e.displayType,o="https://".concat(t.location.host);t.fetch(function(e){var t=e.origin,r=e.value,n=e.categoryId,s=n?"&category=".concat(n):"";return"".concat(t,"/suggestions/?phrase=").concat(r,"&country=pl&highlights=b&sortByElementType=true").concat(s)}({origin:o,value:n,categoryId:s}),{headers:{Accept:"application/vnd.allegro.public.v5+json"},credentials:"same-origin"}).then(c).then(function(e){return e instanceof Array&&e.length>0?function(t){var r=t.suggestions.filter((function(t){return-1!==e.indexOf(t.type)}));return Object.assign({},t,{suggestions:r})}:function(e){return e}}(a)).then((function(e){r.updateSuggesterList({suggestions:e.suggestions,recentlyTypedPhrases:!1,status:200,suggestionsRequestCounter:i})})).catch((function(e){return r.updateSuggesterList({suggestions:[],status:e&&e.status?e.status:e,suggestionsRequestCounter:i})}))}function K(e,t,r){return r.indexOf(e)===t}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseNode=t,this.emitter=new a.a,this.data=this.extractSuggestionData(),this.suggestionsRequestCounter=0}var r;return(r=[{key:"extractSuggestionData",value:function(){var e={};try{e=JSON.parse(this.baseNode.querySelector('[type="application/json"]').textContent)}catch(e){t.newrelic&&t.newrelic.noticeError(e)}return e||{}}},{key:"setPhrase",value:function(e,t,r){var n=encodeURIComponent(e);this.data.search.phrase=n,t||(this.data.search.typedPhrase=n,this.updateSuggestions(n)),r||this.emitter.emit(d.search.phraseChanged,e)}},{key:"removeFromPhrases",value:function(e){this.modifyAndEmit(e,(function(e,t){return t.filter((function(t){return t.value!==e}))}))}},{key:"removeAllPhrases",value:function(){this.modifyAndEmit("_",(function(){return[]}))}},{key:"addToPhrases",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.modifyAndEmit(e,(function(e,r){var n=r.find((function(t){return t.value===e}));return n?(n.enabled=t,r):[{value:e,enabled:t}].concat(r).filter(K).slice(0,5)}))}},{key:"isPhrasesFull",value:function(){var e=this.data.search.phrases;return e instanceof Array&&e.length>=5}},{key:"modifyAndEmit",value:function(e,t){var r=this.data.search.phrases;if("string"==typeof e&&""!==e.trim()){var n=t(encodeURIComponent(e.trim()),r);this.setProperty("search","phrases",n)}}},{key:"increaseRequestCounter",value:function(){return this.suggestionsRequestCounter+=1,this.suggestionsRequestCounter}},{key:"updateSuggestions",value:function(e){if(!1!==this.data.suggester.enabled){this.increaseRequestCounter();var t=this.data,r=t.filters.checkedFilter,n=t.suggester.displayType,s=this.suggestionsRequestCounter;r.type!==o.USERS&&""!==e?Y.call(this,{value:e,categoryId:r.id,suggestionsRequestCounter:s,displayType:n}):""===e?this.updateSuggesterList({suggestions:H(),recentlyTypedPhrases:!0,status:200,suggestionsRequestCounter:s}):this.updateSuggesterList({suggestions:[],suggestionsRequestCounter:s})}}},{key:"setProperty",value:function(e,t,r){this.data[e][t]=r,this.emitter.emit(d[e]["".concat(t,"Changed")],r)}},{key:"changeBooleanProperty",value:function(e,t,r){var n=void 0!==r?r:!this.data[e][t];this.data[e][t]=n,this.emitter.emit(d[e]["".concat(t,"Changed")],n)}},{key:"changeSearchInDescription",value:function(e){this.data.searchInDescriptions=void 0!==e?e:!this.data.searchInDescriptions,this.emitter.emit(d.search.searchInDescriptionsChanged)}},{key:"changeDisplayedFilter",value:function(e){var t=this.data.filters.list.find((function(t){return t.url===e}));this.data.filters.checkedFilter=t||this.data.filters.list[0],this.setCheckedFilterToDisplay(),this.data.suggester.list=[],this.data.suggester.activeIndex=null,this.data.suggester.isExpanded=!1,I(this.data.filters.checkedFilter.type.toLowerCase())&&this.changeSearchInDescription(!1),this.emitter.emit(d.filters.displayedFilterChanged)}},{key:"setCheckedFilterToDisplay",value:function(){var e=this.data.filters.checkedFilter;this.setCheckedFilter(e)}},{key:"setCheckedFilter",value:function(e){var t=this.data.filters.checkedFilter;this.setProperty("filters","recentUrl",t?t.url:"/listing"),this.data.filters.checkedFilter=Object.assign({},e)}},{key:"updateCheckedFilter",value:function(e,t){var r=this.data.filters.checkedFilter;e.redirectUrl?this.setCheckedFilter(R(e)):!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type;if(!e)return!1;var t=e.toLowerCase();return t===o.USER_NAME||t===o.ENDED}(r)||e.recentlyTypedPhrase?e.type.toLowerCase()===o.PHRASE?this.setCheckedFilter(this.data.filters.list[0]):this.setCheckedFilter(R(e)):this.setCheckedFilter(Object.assign({},r,{child:R(e)})),t&&this.emitter.emit(d.filters.displayedFilterChanged)}},{key:"markNextSuggestion",value:function(){if(0!==this.data.suggester.list.length){null===this.data.suggester.activeIndex?this.data.suggester.activeIndex=0:this.data.suggester.activeIndex=(this.data.suggester.activeIndex+1)%this.data.suggester.list.length;var e=this.data.suggester.list[this.data.suggester.activeIndex];this.updateCheckedFilter(e),this.setPhrase(L(e),!0),U(this.data)&&this.changeBooleanProperty("suggester","isExpanded",!0),this.emitter.emit(d.suggester.activeIndexChanged,this.data.suggester.activeIndex)}}},{key:"markPrevSuggestion",value:function(){if(0!==this.data.suggester.list.length){null===this.data.suggester.activeIndex||0===this.data.suggester.activeIndex?this.data.suggester.activeIndex=this.data.suggester.list.length-1:this.data.suggester.activeIndex=this.data.suggester.activeIndex-1;var e=this.data.suggester.list[this.data.suggester.activeIndex];this.updateCheckedFilter(e),this.setPhrase(L(e),!0),U(this.data)&&this.changeBooleanProperty("suggester","isExpanded",!0),this.emitter.emit(d.suggester.activeIndexChanged,this.data.suggester.activeIndex)}}},{key:"markSuggestion",value:function(e){this.data.suggester.activeIndex=e,this.emitter.emit(d.suggester.activeIndexChanged,e)}},{key:"updateSuggesterList",value:function(e){var t=e.suggestions,r=e.recentlyTypedPhrases,n=void 0!==r&&r,s=e.changeExpand,i=void 0===s||s,a=e.status,o=void 0===a?null:a,c=e.suggestionsRequestCounter;B.call(this,c)&&(this.data.suggester.list=t,this.data.suggester.activeIndex=null,this.data.suggester.recentlyTypedPhrases=n,this.emitter.emit(d.suggester.listChanged,{list:this.data.suggester.list,status:o}),i&&(U(this.data)?this.changeBooleanProperty("suggester","isExpanded",!0):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.suggester,r=(t=void 0===t?{}:t).list,n=t.isExpanded;return!z(e)&&0===r.length&&n}(this.data)&&this.changeBooleanProperty("suggester","isExpanded",!1)))}},{key:"setFocus",value:function(e){this.data.search.isFocused===!e&&this.setProperty("search","isFocused",!!e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,r),e}(),Q={isExpanded:"_d25db_1WsVD",isActive:k,recentlyTypedPhrase:"_d25db_3wMkr",suggestionText:"_d25db_aBlO_",suggestionOptions:{wrapper:"_d25db_314Th",rewrite:"_d25db_3JRQl",removeRecentlyTypedPhrase:"_d25db_1fymF"},wrapper:"_d25db_MXQjC",suggestion:m},W=function(){function e(t,r,n){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"toggleSearchInDescriptions",(function(e){if(e&&e.target&&e.target.previousSibling){var t=e.target.previousSibling;s.store.changeSearchInDescription(!t.checked),s.cookieMonster.sendEvent("searchInDescriptionChange",s.store.data.searchInDescriptions)}})),this.baseNode=t,this.store=r,this.cookieMonster=n}var t;return(t=[{key:"init",value:function(){j(this.baseNode,'[data-role="search-in-description-label"]',"click",this.toggleSearchInDescriptions)}},{key:"remove",value:function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;x(e.querySelectorAll(".".concat(y," ").concat(t))).forEach((function(e){return e.removeEventListener(r,n)}))}(this.baseNode,'[data-role="search-in-description-label"]',"click",this.toggleSearchInDescriptions)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}(),V=n("ji7g"),J=n.n(V);function X(e){var t,r,n="";if(e)if("object"==typeof e)if(e.push)for(t=0;t<e.length;t++)e[t]&&(r=X(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(r=X(t))&&(n&&(n+=" "),n+=r);else"boolean"==typeof e||e.call||(n&&(n+=" "),n+=e);return n}var Z,$=function(){for(var e,t=0,r="";t<arguments.length;)(e=X(arguments[t++]))&&(r&&(r+=" "),r+=e);return r};function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var te={all:"Wszystkie kategorie",everywhere:"Wszędzie",users:"Użytkownicy",ended:"Zakończone"},re=(ee(Z={},o.DEPARTMENT,"Kategorie"),ee(Z,o.OTHER,"Inne opcje"),{removePhrase:"USUŃ",captions:{recentlyTypedPhrases:"ostatnie wyszukiwania",user:function(e){return'szukasz w ofertach użytkownika "'.concat(e,'"')},ended:"szukasz w ofertach zakończonych",categoryRedirect:"kategorie",products:"produkty",rest:"podobne wyszukiwania"},descriptions:{category:"w kategorii",ended:"w ofertach zakończonych",user:function(e){return'w ofertach użytkownika "'.concat(e,'"')},users:"w nazwach użytkowników"}}),ne={type:"rest",caption:re.captions.rest},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type,n=void 0===r?"":r;return n.toLowerCase()===e.toLowerCase()}};function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.position>t.position?1:e.position<t.position?-1:0}function ae(e){return e&&e.child&&e.child.type!==o.PHRASE}function oe(e){return e.split(">").map((function(e){return e.trim()}))}function ce(){var e,t,r=(e=['<div class="','"><img src="','"/><span>',"</span></div>"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return ce=function(){return r},r}var ue="_d25db_3JF8t";function le(){var e=de(['<span class="','" data-role="suggestion-category"><span class="','">',"</span>","</span>"]);return le=function(){return e},e}function he(){var e=de(['<span class="','" data-role="suggestion-category">',"</span>"]);return he=function(){return e},e}function de(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var fe="_d25db_xu8aA",pe=$("_d25db_2TgMt","_d25db_340yi");function ge(e){var t,r=function(e){if(Array.isArray(e))return e}(t=oe(e))||function(e,t){var r=[],n=!0,s=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),2!==r.length);n=!0);}catch(e){s=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}return r}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),n=r[0],s=r[1];return s?J()(le(),fe,pe,n,s):J()(he(),fe,n)}function ve(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).phrase,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?J.a.safe("".concat(e).concat(t)):""}function ye(){var e,t,r=(e=['<span class="','" data-role="suggestion-text">',"</span>"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return ye=function(){return r},r}function be(e){return e?J()(ye(),Q.suggestionText,e):""}function me(){var e=Pe([" ",'<div class="','"><span class="','" data-role="remove-recently-typed-','">',"</span></div>"]);return me=function(){return e},e}function ke(){var e=Pe([" ",'<span class="','">',"</span>"]);return ke=function(){return e},e}function we(){var e=Pe([""," ",""]);return we=function(){return e},e}function Ee(){var e=Pe(["",""]);return Ee=function(){return e},e}function _e(){var e=Pe([""," ",""]);return _e=function(){return e},e}function Ce(){var e=Pe([""," ",""]);return Ce=function(){return e},e}function Pe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Oe=function(e){return J()(ke(),ve(e,"&nbsp;"),"_d25db_2TgMt",function(e){switch(e.type){case o.ENDED:var t=re.descriptions.ended;return ae(e)?J()(Ce(),ge(e.child.name),t):t;case o.DEPARTMENT:case o.CATEGORY:case o.PHRASE_IN_CATEGORY:return J()(_e(),re.descriptions.category,ge(e.name));case o.CATEGORY_REDIRECT:return J()(Ee(),ge(e.name));case o.USER_NAME:var r=re.descriptions.user(e.name);return ae(e)?J()(we(),ge(e.child.name),r):r;case o.USERS:return re.descriptions.users;default:return""}}(e))},xe=n("xxrt");function je(){var e,t,r=(e=[" ",'<div class="','"><i class="','"></i></div>'],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return je=function(){return r},r}var Se=$(Q.suggestionOptions.rewrite,xe.A,xe.B);function Te(e,t){return t?J()(je(),be(e),Q.suggestionOptions.wrapper,Se):be(e)}function Le(){var e,t,r=(e=[" ",'&nbsp;<span class="','">','&nbsp;</span><span class="','" data-role="suggestion-category">',"</span>"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return Le=function(){return r},r}var Re="_d25db_2TgMt",Ie="_d25db_xu8aA";function Ae(){var e,t,r=(e=["<span>","&nbsp;</span>"," "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return Ae=function(){return r},r}function Ne(){var e=Fe(['<span class="','" data-role="suggestion-product">','<span class="','">',"</span></span>"]);return Ne=function(){return e},e}function De(){var e=Fe(['<span class="','"><img class="','" alt="','" src="','" /></span>']);return De=function(){return e},e}function Fe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Me(){var e,t,r=(e=['<div class="','" data-index="','" tabindex="0">',"</div>"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return Me=function(){return r},r}var He={category:"_d25db_1Y1KH","recently-typed-phrase":"_d25db_3wMkr"};function qe(e){var t=e.suggestion,r=e.index,n=e.activeIndex,s=e.mobileFeaturesEnabled,i=t.recentlyTypedPhrase?o.RECENTLY_TYPED_PHRASE:t.type.toLowerCase(),a=function(e){var t,r=e.suggestion,n=e.index,s=e.mobileFeaturesEnabled;switch(e.type){case o.RECENTLY_TYPED_PHRASE:return function(e,t){return J()(me(),be(Oe(e)),Q.suggestionOptions.wrapper,Q.suggestionOptions.removeRecentlyTypedPhrase,t,re.removePhrase)}(r,n);case o.CATEGORY:case o.DEPARTMENT:return Te(function(e){return J()(Ae(),re.descriptions.category,ge(e.name))}(r),s);case o.AD:return be((t=r).type.toLowerCase()!==o.AD?"":J()(ce(),ue,J.a.safe(t.imageUrl),t.name));case o.CATEGORY_REDIRECT:return be(ge(r.name));case o.PHRASE_IN_CATEGORY:return Te(function(e){var t=oe(e.name),r=t[1]||t[0];return J()(Le(),J.a.safe(e.phrase),Re,re.descriptions.category,Ie,r)}(r),s);case o.PRODUCT:return function(e){var t=$(Q.suggestionText,e.imageUrl&&w),r=e.imageUrl?J()(De(),_,E,e.name,e.imageUrl):"";return J()(Ne(),t,r,C,e.name)}(r);default:return Te(ve(r),s)}}({suggestion:t,index:r,type:i,mobileFeaturesEnabled:s}),c=$(b,m,He[i],null!==n&&r===n&&k,s&&v);return J()(Me(),c,r,a)}function ze(){var e=Be(['<div class="','" data-role="suggestion-caption">',"</div>"]);return ze=function(){return e},e}function Ue(){var e=Be(['<div class="','">'," ","</div>"]);return Ue=function(){return e},e}function Be(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ye=$("_d25db_SIXec","_d25db_2WvE7");function Ke(e,t){return J()(Ue(),Q.suggestionOptions.wrapper,t?J()(ze(),Ye,t):"",e)}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qe(e,t,r[t])}))}return e}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(){var e=Je(['<div class="','">','<input class="','" type="checkbox" data-role="search-in-description" ',' autocomplete="off"><label class="','" data-role="search-in-description-label">',"</label></div>"]);return We=function(){return e},e}function Ve(){var e=Je(['<hr class="','"></hr>']);return Ve=function(){return e},e}function Je(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Xe=$(xe.s,xe.p),Ze=$(xe.j,xe.k,xe.l),$e=$("_d25db_3NzZ8",xe.G),et=J()(Ve(),xe.v);function tt(){var e=at(['<div data-role="chip-header" class="','"><div data-phrase="','" class="','" title="','">',"</div></div>"," "]);return tt=function(){return e},e}function rt(){var e=at(['<div data-role="chip-header" class="','"><div class="'," ",'">+'," ","</div></div>"]);return rt=function(){return e},e}function nt(){var e=at([" ",'<div class="','">',"</div>"]);return nt=function(){return e},e}function st(){var e=at(['<div class="','"><p class="','">Nie można wyszukać więcej fraz niż 5. Usuń lub zmień jedną z fraz aby poszukać innych ofert.</p></div><hr class="','"/>']);return st=function(){return e},e}function it(){var e=at(['<div data-role="chip" data-phrase="','" class="','" title="','"><span data-role="chip-edit" class="','">','</span><button data-role="chip-remove" class="','" type="button" title="usuń"><i class="','"></i></button></div>']);return it=function(){return e},e}function at(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ot=[xe.b,xe.Q],ct=$.apply(void 0,ot.concat(["_d25db_10lcd"])),ut=$.apply(void 0,ot.concat(["_d25db_1wa49"])),lt=$(xe.b,xe.a,xe.O,xe.Q,xe.Z,xe.X,"_d25db_186rf"),ht=$(xe.r,xe.z,xe.L,xe.M),dt=$(lt,xe.w,xe.x,xe.I,xe.H,xe.P,xe.N,xe.S,xe.r,xe.w,xe.x,"_d25db_3ku-a"),ft=$(xe.i,xe.X,xe.O,xe.y),pt=$(xe.c,xe.f,xe.h,xe.bb,xe.K),gt=$(xe.A,xe.D,xe.m),vt=$(xe.g,xe.L),yt=$(xe.W,xe.Y,xe.n);function bt(){var e,t,r=(e=['<div class="','" data-role="suggestions-apron">'," "," ","</div>"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return bt=function(){return r},r}var mt=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseNode=t,this.store=r,this.searchInDescriptionsListeners=n}var t;return(t=[{key:"toggleSuggester",value:function(e){var t=this.baseNode.querySelector(".".concat(Q.wrapper));t&&(e?t.classList.add(Q.isExpanded):t.classList.remove(Q.isExpanded))}},{key:"updateSuggesterList",value:function(){var e=this.baseNode.querySelector(".".concat(Q.wrapper));e&&(e.parentNode.removeChild(e),this.searchInDescriptionsListeners.remove()),this.baseNode.querySelector("._d25db_3K7x6").insertAdjacentHTML("afterend",function(e){var t=e.suggester,r=(t=void 0===t?{}:t).list,n=void 0===r?[]:r,s=t.isExpanded,i=t.enabled,a=e.searchInDescriptionsEnabled,c=e.phrases;if(!i||0===n.length&&!a)return"";var u=0===n.length&&0===c.length,l=$("_d25db_MXQjC",s&&"_d25db_1WsVD",u&&"_d25db_86AyO");return J()(bt(),l,function(e){var t=e.phrase,r=e.phrases,n=e.isPhrasesFull,s="";if(r instanceof Array&&r.length>0){var i=r.map((function(e){var t=decodeURIComponent(e.value);return J()(it(),e.value,dt,t,ft,t,pt,gt)}));return""!==t&&n&&(s=J()(st(),vt,yt,$(xe.v))),J()(nt(),s,ht,i)}return""}(e),function(e){var t=e.suggester,r=(t=void 0===t?{}:t).list,n=void 0===r?[]:r,s=t.activeIndex,i=t.recentlyTypedPhrases,a=e.checkedFilter,c=e.mobileFeaturesEnabled,u=e.isPhrasesFull;if(0===n.length||u)return"";var l=re.captions,h=function(e){var t=e.suggestions,r=e.activeIndex,n=e.mobileFeaturesEnabled;return e.recentlyTypedPhrases?function(e){var t=e.activeIndex,r=e.mobileFeaturesEnabled;return e.suggestions.map((function(e,n){return qe({suggestion:e,index:n,activeIndex:t,mobileFeaturesEnabled:r})}))}({suggestions:t,activeIndex:r,mobileFeaturesEnabled:n}):function(e){return function(e,t,r){return e.reduce((function(e,n,s){var i,a,o,c=qe({suggestion:n,activeIndex:t,index:s,mobileFeaturesEnabled:r}),u=(i=e,a=n.type,-1===(o=i.findIndex(se(a)))?i.findIndex(se(ne.type)):o);return e.map((function(e,t){if(t!==u)return e;var r=e.type,n=e.caption,i=e.list,a=void 0===i?[]:i,o=e.position;return{type:r,caption:n,position:void 0===o?s:o,list:a.concat([c])}}))}),[{type:o.PHRASE_IN_CATEGORY,list:[]},{type:o.CATEGORY_REDIRECT,caption:re.captions.categoryRedirect,list:[]},Ge({},ne,{list:[]}),{type:o.PRODUCT,caption:re.captions.products,list:[]}])}(e.suggestions,e.activeIndex,e.mobileFeaturesEnabled).filter((function(e){return e.list.length>0})).sort(ie).map((function(e){return Ke(e.list,e.caption)}))}({suggestions:t,activeIndex:r,mobileFeaturesEnabled:n})}({suggestions:n,activeIndex:s,recentlyTypedPhrases:i,mobileFeaturesEnabled:c});return i?Ke(h,l.recentlyTypedPhrases):a&&a.type.toLowerCase()===o.USER_NAME?Ke(h,l.user(a.name)):a&&a.type.toLowerCase()===o.ENDED?Ke(h,l.ended):h}(e),function(e){var t=e.searchInDescriptionsEnabled,r=e.searchInDescriptions,n=e.suggester,s=(n=void 0===n?{}:n).list,i=void 0===s?[]:s,a=e.checkedFilter,o=(a=void 0===a?{}:a).type;if(!t||I(void 0===o?"":o))return"";var c=0!==i.length;return J()(We(),Xe,c?et:"",Ze,r?"checked":"",$e,"szukaj też w opisach ofert")}(e))}({suggester:this.store.data.suggester,checkedFilter:this.store.data.filters.checkedFilter,mobileFeaturesEnabled:this.store.data.config.mobileFeaturesEnabled,searchInDescriptionsEnabled:this.store.data.config.searchInDescriptionsEnabled,searchInDescriptions:this.store.data.searchInDescriptions,phrase:this.store.data.search.phrase,phrases:this.store.data.search.phrases,isPhrasesFull:this.store.isPhrasesFull()})),this.searchInDescriptionsListeners.init()}},{key:"markActiveSuggestion",value:function(e){var t,r=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(t=this.baseNode.querySelectorAll(".".concat(Q.suggestion)))||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),n=r.find((function(e){return e.classList.contains(Q.isActive)}));n&&n.classList.remove(Q.isActive),r.length>0&&r[e].classList.add(Q.isActive)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}(),kt=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.searchForm=r,this.cookieMonster=n}var r;return(r=[{key:"setRecentlyTypedPhrases",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.store.updateSuggesterList({suggestions:H(),recentlyTypedPhrases:!0,changeExpand:e,suggestionsRequestCounter:this.store.increaseRequestCounter()})}},{key:"handleSuggesterClick",value:function(){this.store.data.suggester.enabled&&(this.store.data.suggester.list.length>0?this.store.changeBooleanProperty("suggester","isExpanded"):this.store.data.search.phrase?this.store.updateSuggestions(this.store.data.search.phrase):this.setRecentlyTypedPhrases(!0))}},{key:"hideSuggester",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target;(t||t.classList)&&(t.classList.contains("_d25db_3K7x6")||t.classList.contains("_d25db_2ypBx")||t.classList.contains("_d25db_1OPU3")||S(t,".".concat(Q.wrapper))||this.store.changeBooleanProperty("suggester","isExpanded",!1))}},{key:"handleSuggestionClick",value:function(e){var t=e.currentTarget.dataset.index,r=this.store.data.suggester.list[t];this.cookieMonster.sendClickEvent("suggestHintClick",r,t),this.store.updateCheckedFilter(r),this.store.setPhrase(L(r),!0),this.searchForm.submit(e)}},{key:"handleSuggestionMouseover",value:function(e){this.store.markSuggestion(e.currentTarget.dataset.index)}},{key:"removeRecentlyTypedPhraseFromView",value:function(e){e.stopPropagation(),function(e){if(M()){var r=parseInt(e,10),n=D();r>=0&&r<n.length&&(n=F(n,r)),t.localStorage.setItem(N,JSON.stringify(n))}}(e.target.parentNode.parentNode.dataset.index),this.setRecentlyTypedPhrases(),this.store.changeBooleanProperty("search","isFocused",!0)}},{key:"rewriteTypedPhrase",value:function(e){e.stopPropagation();var t=e.currentTarget.parentNode.parentNode.dataset.index,r=Object.assign({},this.store.data.suggester.list[t]);if(r.type.toLowerCase()===o.CATEGORY){var n=r.name.split(">").map((function(e){return e.trim()}));r.name=n[1]||n[0]}this.cookieMonster.sendClickEvent("suggestRewriteClick",r,t),this.store.updateCheckedFilter(r,!0),this.store.setPhrase("".concat(L(r)," ")),this.store.changeBooleanProperty("search","isFocused",!0)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,r),e}(),wt=function(){function e(t,r,n,s,i,a){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseNode=t,this.store=r,this.suggester=n,this.suggesterHandlers=s,this.multisearchHandlers=i,this.cookieMonster=a,this.clickOutsideListner=function(e){o.suggesterHandlers.hideSuggester(e)}}var t;return(t=[{key:"bindSuggestionsClickListeners",value:function(){var e=this;j(this.baseNode,".".concat(Q.suggestion),"click",(function(t){e.suggesterHandlers.handleSuggestionClick(t)})),j(this.baseNode,".".concat(Q.suggestion),"mouseover",(function(t){e.suggesterHandlers.handleSuggestionMouseover(t)})),j(this.baseNode,".".concat(Q.suggestionOptions.removeRecentlyTypedPhrase),"click",(function(t){e.suggesterHandlers.removeRecentlyTypedPhraseFromView(t)})),j(this.baseNode,".".concat(Q.suggestionOptions.rewrite),"click",(function(t){e.suggesterHandlers.rewriteTypedPhrase(t)})),j(this.baseNode,'[data-role="chip-edit"]',"click",(function(t){e.multisearchHandlers.editPhrase(t),e.store.changeBooleanProperty("search","isFocused",!0)})),j(this.baseNode,'[data-role="chip-remove"]',"click",(function(t){e.multisearchHandlers.removePhrase(t),e.store.changeBooleanProperty("search","isFocused",!0)})),document.addEventListener("click",this.clickOutsideListner),this.baseNode.addEventListener("click",(function(e){e.stopPropagation()}))}},{key:"unmount",value:function(){document.removeEventListener("click",this.clickOutsideListner)}},{key:"initDOMListeners",value:function(){this.bindSuggestionsClickListeners()}},{key:"onExpandChangeEvent",value:function(e){this.suggester.toggleSuggester(e),this.cookieMonster.sendLayerViewEvent(e)}},{key:"initEmitterListeners",value:function(){var e=this;this.store.emitter.on(h.isExpandedChanged,(function(t){e.onExpandChangeEvent(t)})),this.store.emitter.on(h.listChanged,(function(t){e.suggester.updateSuggesterList(),e.bindSuggestionsClickListeners(),e.cookieMonster.sendSuggestsShowEvent(t.status)})),this.store.emitter.on(h.activeIndexChanged,(function(t){e.suggester.markActiveSuggestion(t)}))}},{key:"init",value:function(){this.initDOMListeners(),this.initEmitterListeners()}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}(),Et=n("fbh+");function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ct(e,t,r[t])}))}return e}function Ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pt(e){return function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ot(e){return Array.isArray(e)?Pt(e):[e]}function xt(e){return e.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.keys(t);return _t({},e,{},r.reduce((function(r,n){var s=e[n],i=t[n];return _t({},r,Ct({},n,s?[].concat(Pt(Ot(s)),Pt(Ot(i))):i))}),{}))}))}var jt=["p","us_id","string","description","show-raty0-disclaimer"],St=[o.CATEGORY,o.DEPARTMENT,o.ENDED,o.USER_NAME],Tt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t}var r;return(r=[{key:"redirectToSearchPage",value:function(e,r,n){var s=this.store.data.filters.checkedFilter.redirectUrl;document.location.assign(s||function(e,r,n,s){var i=Object(Et.parse)(t.location.href),a=s.data.filters.checkedFilter,c=a.type,u=a.child,l=a.url,h="".concat(l);(c.toLowerCase()===o.USER_NAME||c.toLowerCase()===o.ENDED)&&u&&u.alias&&(h="".concat(l,"/").concat(u.alias));var d,f=!(d=i.query.string)||d!==e,p=r?function(e,r,n){var s;return s=n.data.filters.checkedFilter.url,t.location.pathname.startsWith(s)&&!r?{}:function(e,t){var r=t.data.filters,n=r.recentUrl,s=r.checkedFilter;if(n&&(function(e,t){return e.url.startsWith("/kategoria")&&t.startsWith("/kategoria")}(s,n)||function(e,t){return e.startsWith("/listing")&&t.type.toLowerCase()===o.DEPARTMENT}(n,s)||function(e,t){return e.startsWith("/kategoria")&&t.type.toLowerCase()===o.ALL}(n,s))&&s.url!==n){var i=e.order;return i?{order:i}:{}}return e}(function(e,t){var r=function(e){return!St.includes(e.data.filters.checkedFilter.type.toLowerCase())}(t)?jt.concat(["order"]):jt,n=Object.assign({},e);return r.forEach((function(e){delete n[e]})),n}(e,n),n)}(i.query,f,s):{};e&&(p.string=e);var g=s.data.config.searchInDescriptionsEnabled&&s.data.searchInDescriptions,v=!i.query.description;return g&&(f||!f&&v)&&(p.description=1),Object(Et.stringify)({protocol:i.protocol,host:i.host,path:h.substr(1).split("/"),query:xt([p,n])})}(e,r,n,this.store))}},{key:"submit",value:function(e){var t,r=this.store.data.search,n=r.passAllQueryParameters,s=r.additionalParams;if(this.store.data.filters.checkedFilter.type===o.USERS)return t=e,void document.location.assign("/uzytkownik/".concat(encodeURIComponent(t)));this.redirectToSearchPage(e,n,s)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,r),e}(),Lt="https://assets.allegrostatic.com/metrum/icon/arrow-4f530b817b.svg",Rt="https://assets.allegrostatic.com/metrum/icon/arrowhead-408f6067f5.svg",It="https://assets.allegrostatic.com/metrum/icon/bag-e62bcbe477.svg",At="https://assets.allegrostatic.com/metrum/icon/bell-3152caf80a.svg",Nt="https://assets.allegrostatic.com/metrum/icon/calendar-f93ad00d73.svg",Dt="https://assets.allegrostatic.com/metrum/icon/card-b8c20aa8b8.svg",Ft="https://assets.allegrostatic.com/metrum/icon/cash-transfer-0634609282.svg",Mt="https://assets.allegrostatic.com/metrum/icon/chat-895c40d857.svg",Ht="https://assets.allegrostatic.com/metrum/icon/document-83bc81cb63.svg",qt="https://assets.allegrostatic.com/metrum/icon/download-835030a79e.svg",zt="https://assets.allegrostatic.com/metrum/icon/edit-c0e7ffc316.svg",Ut="https://assets.allegrostatic.com/metrum/icon/four-squares-57ffc0178b.svg",Bt="https://assets.allegrostatic.com/metrum/icon/home-f854a54f0c.svg",Yt="https://assets.allegrostatic.com/metrum/icon/information-bd1f466c88.svg",Kt="https://assets.allegrostatic.com/metrum/icon/magnifying-glass-339b1a8baa.svg",Gt="https://assets.allegrostatic.com/metrum/icon/mail-open-838998853d.svg",Qt="https://assets.allegrostatic.com/metrum/icon/menu-ece8abaf56.svg",Wt="https://assets.allegrostatic.com/metrum/icon/minus-2896769e69.svg",Vt="https://assets.allegrostatic.com/metrum/icon/parcel-with-pin-6eac8a409a.svg",Jt="https://assets.allegrostatic.com/metrum/icon/play-button-9047c94f0d.svg",Xt="https://assets.allegrostatic.com/metrum/icon/plus-169dd3f735.svg",Zt="https://assets.allegrostatic.com/metrum/icon/question-cc65c1429d.svg",$t="https://assets.allegrostatic.com/metrum/icon/star-empty-36debc2c31.svg",er="https://assets.allegrostatic.com/metrum/icon/star-full-49483f5878.svg",tr="https://assets.allegrostatic.com/metrum/icon/three-dots-39687c3861.svg",rr="https://assets.allegrostatic.com/metrum/icon/thumb-down-a9bc355903.svg",nr="https://assets.allegrostatic.com/metrum/icon/thumb-up-2d270f52c7.svg",sr="https://assets.allegrostatic.com/metrum/icon/trash-bin-b5de8ba85e.svg",ir="https://assets.allegrostatic.com/metrum/icon/user-499f8f91fb.svg",ar="https://assets.allegrostatic.com/metrum/icon/wallet-clock-8adcf36409.svg",or="https://assets.allegrostatic.com/metrum/icon/x-7a9fb85837.svg";function cr(){var e,t,r=(e=['<span class="','">','</span><span class="','">',"</span>"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return cr=function(){return r},r}var ur=$(xe.o,xe.u),lr=$(xe.s,xe.q),hr=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type;return r===e}};function dr(){var e=pr(['itemscope itemtype="http://schema.org/WebSite"']);return dr=function(){return e},e}function fr(){var e=pr(['itemscope itemprop="potentialAction" itemtype="http://schema.org/SearchAction"']);return fr=function(){return e},e}function pr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}hr(o.DEPARTMENT),hr(o.ALL),$("_d25db_3KhYP",xe.s,xe.p,xe.S,xe.J),$(xe.V,xe.S),$(xe.A,xe.C,xe.T,xe.E,xe.R),$("_d25db_2P-5I",xe.W,xe.U,xe.ab),$("_d25db_JS35Z",xe.W,xe.X,xe.R),$("_d25db_1OPU3",xe.A,xe.D);var gr="standard-variant",vr="multisearch-variant";$(xe.W,y),$("_d25db_1t06j",xe.c,xe.e,xe.d),$(xe.A,xe.t),J()(fr()),J()(dr());var yr=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.cookieMonster=r}var r;return(r=[{key:"submit",value:function(e){var r=this.store.data.search,n=r.passAllQueryParameters,s=r.additionalParams;this.store.addToPhrases(e);var i=(this.store.data.search||{phrases:[]}).phrases.map((function(e){return decodeURIComponent(e.value)}));e&&""!==e&&this.cookieMonster.sendAddChipEvent(e),document.location.assign(function(e,r,n){var s=Object(Et.parse)(t.location.href),i=r?s.query:{};return e&&(i.phrases=e),Object(Et.stringify)({protocol:s.protocol,host:s.host,path:"szukaj/multi".split("/"),query:xt([i,n])})}(i,n,s))}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,r),e}();function br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mr(e){return e&&e.type===o.CATEGORY_REDIRECT}var kr=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseNode=t,this.store=r,this.singleSearch=new Tt(this.store),this.multiSearch=new yr(this.store,n)}var r;return(r=[{key:"submit",value:function(e){e&&e.preventDefault&&e.preventDefault();var r=this.baseNode.querySelector("._d25db_3K7x6"),n=this.store.data,s=n.filters.checkedFilter,i=n.search.phrases,a=decodeURIComponent(this.store.data.search.phrase).trim();r&&!this.store.data.search.phrase&&(a=Object(f.htmlUnescape)(r.value.trim())),(a||i instanceof Array&&i.length>0||function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type,n=t.child,s=o.AD,i=o.PRODUCT,a=o.CATEGORY_REDIRECT,c=(br(e={},s,s),br(e,i,i),br(e,a,a),e);return c[r]||mr(n)}(s))&&(s.type!==o.AD&&s.type!==o.PRODUCT&&function(e){if(M()){var r=D();if(e){if(""===e.phrase)return;var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){A(e,t,r[t])}))}return e}({},e,{phrase:encodeURIComponent(e.phrase)}),s=function(e,t){var r=e.map(T),n=T(t);return r.findIndex((function(e){return e.phrase===n.phrase&&e.context.type===n.context.type&&e.context.id===n.context.id}))}(r,n);-1!==s?r=F(r,s):5===r.length&&r.pop(),r.unshift(n)}t.localStorage.setItem(N,JSON.stringify(r))}}({phrase:a,context:{type:s.type,name:s.name,url:s.url,id:s.id,child:s.child}}),!0===this.store.data.search.isMultisearch?this.multiSearch.submit(a):this.singleSearch.submit(a))}},{key:"changePhrase",value:function(e){var t=this.baseNode.querySelector("._d25db_3K7x6");t&&(t.value=e)}},{key:"changeSearchInDescriptions",value:function(){var e=this.baseNode.querySelector('[data-role="search-in-description"]');e&&(e.checked=this.store.data.searchInDescriptions)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,r),e}(),wr=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseNode=t,this.store=r,this.cookieMonster=n}var t;return(t=[{key:"initDOMListeners",value:function(){var e=this;j(this.baseNode,'[data-role="filters-dropdown-toggle"]',"change",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.target.value;e.store.changeDisplayedFilter(r)}))}},{key:"onDisplayedFilterChange",value:function(){var e=this.store.data.filters.checkedFilter.name;this.cookieMonster.sendEvent("filterChange",e);var t=this.baseNode.querySelector("._d25db_JS35Z");t&&(t.innerHTML=function(e){if(!e)return"";var t=te.everywhere;return te.all===e?J()(cr(),ur,t,lr,e):e}(e))}},{key:"initEmitterListeners",value:function(){var e=this;this.store.emitter.on(u.displayedFilterChanged,(function(){e.onDisplayedFilterChange()}))}},{key:"init",value:function(){this.initDOMListeners(),this.initEmitterListeners()}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}(),Er=function(){function e(t,r,n,s,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseNode=t,this.store=r,this.searchHandlers=n,this.suggesterHandlers=s,this.searchForm=i}var t;return(t=[{key:"initDOMListeners",value:function(){var e=this;j(this.baseNode,"._d25db_2ypBx","click",(function(){e.searchHandlers.handleRemoveQueryClick()})),j(this.baseNode,"._d25db_3K7x6","click",(function(){e.suggesterHandlers.handleSuggesterClick(),e.searchHandlers.toggleRemoveQuery()})),j(this.baseNode,"._d25db_3K7x6","input",(function(t){e.searchHandlers.handleSearchChange(t)})),j(this.baseNode,"._d25db_3K7x6","focus",(function(){e.store.setFocus(!0)})),j(this.baseNode,"._d25db_3K7x6","blur",(function(){e.store.setFocus(!1)})),j(this.baseNode,"._d25db_1t06j","click",(function(t){e.searchForm.submit(t)})),j(this.baseNode,"._d25db_3K7x6","keydown",(function(t){e.searchHandlers.handleKeyDown(t)}))}},{key:"initEmitterListeners",value:function(){var e=this;this.store.emitter.on(l.isFocusedChanged,(function(){e.searchHandlers.setFocus()})),this.store.emitter.on(l.phraseChanged,(function(t){e.searchForm.changePhrase(t)})),this.store.emitter.on(l.searchInDescriptionsChanged,(function(){e.searchForm.changeSearchInDescriptions()}))}},{key:"init",value:function(){this.initDOMListeners(),this.initEmitterListeners()}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}(),_r=function(){function e(t,r,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseNode=t,this.store=r,this.searchForm=n,this.cookieMonster=s}var t;return(t=[{key:"toggleRemoveQuery",value:function(){var e=this.baseNode.querySelector("._d25db_2ypBx");e&&(""===this.store.data.search.phrase?e.classList.remove("_d25db_DipzM"):e.classList.add("_d25db_DipzM"))}},{key:"handleSearchChange",value:function(e){var t=e.currentTarget.value;this.store.data.search.phrase!==t&&this.store.setPhrase(t,!1,!0),this.toggleRemoveQuery()}},{key:"handleRemoveQueryClick",value:function(){this.store.setPhrase(""),this.toggleRemoveQuery()}},{key:"prepareSendHintClickEvent",value:function(){null!==this.store.data.suggester.activeIndex&&this.cookieMonster.sendClickEvent("suggestHintClick",this.store.data.suggester.list[this.store.data.suggester.activeIndex])}},{key:"toggleSearch",value:function(){this.store.changeBooleanProperty("search","isExpanded"),this.store.changeBooleanProperty("search","isFocused",this.store.data.search.isExpanded)}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case 40:this.store.markNextSuggestion();break;case 38:this.store.markPrevSuggestion();break;case 13:this.prepareSendHintClickEvent(),this.searchForm.submit();break;case 27:this.store.changeBooleanProperty("suggester","isExpanded",!1);break;default:return void this.store.setCheckedFilterToDisplay()}e.preventDefault()}},{key:"setFocus",value:function(){var e=this.baseNode.querySelector("._d25db_3K7x6");e&&this.store.data.search.isFocused&&e.focus()}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function Cr(e){return{types:e.reduce((function(e,t){var r=q(t);return void 0!==e[r.type]?e[r.type]+=1:e[r.type]=1,e}),{}),count:e.length}}function Pr(e){var t=e.find((function(e){return"AD"===e.type}));return t?t.campaignId:null}var Or=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseNode=t,this.store=r}var r;return(r=[{key:"sendEvent",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=t,i=s.cm,a=this.baseNode.querySelector('[data-role="search-input"]');t.opbox&&a?t.opbox.analytics.sendEvent(a,e,r,n):i&&i("send","event",{category:"suggest.layer",action:e,label:"allegro.header",value:r,params:n})}},{key:"sendLayerViewEvent",value:function(e){if(e){var t={searchPhrase:decodeURIComponent(this.store.data.search.phrase)};this.sendEvent("suggestLayerView",1,t)}}},{key:"sendSuggestsShowEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.store.data.search.phrase,r="suggestionsShow",n={searchPhrase:decodeURIComponent(t),suggestions:Cr(this.store.data.suggester.list),status:e},s=Pr(this.store.data.suggester.list);s&&(n.campaignId=s),this.sendEvent(r,t,n)}},{key:"sendClickEvent",value:function(e,t,r){var n=q(t),s=L(n),i=t.campaignId||null,a={type:n.type,index0:r,searchPhrase:s,typedPhrase:decodeURIComponent(this.store.data.search.typedPhrase),categoryId:n.id};i&&(a.campaignId=i),this.sendEvent(e,s,a)}},{key:"sendAddChipEvent",value:function(e){this.sendEvent("ChipsAdd",e)}},{key:"sendChipEditEvent",value:function(e){this.sendEvent("ChipsEdit",e)}},{key:"sendChipRemoveEvent",value:function(e){this.sendEvent("ChipsRemove",e)}},{key:"sendChipOverflowEvent",value:function(){this.sendEvent("ChipsOverflow")}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,r),e}(),xr=function(){function e(t,r,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseNode=t,this.store=r,this.multisearchHandlers=n,this.suggesterHandlers=s}var t;return(t=[{key:"initChipListeners",value:function(){var e=this;j(this.baseNode,'[data-role="chip-header"]',"click",(function(){e.suggesterHandlers.handleSuggesterClick(),e.store.changeBooleanProperty("suggester","isExpanded",!0),e.store.changeBooleanProperty("search","isFocused",!0)}))}},{key:"init",value:function(){var e=this;this.store&&this.store.data&&this.store.data.search&&this.store.data.search.isMultisearch&&(this.initChipListeners(this.baseNode),j(this.baseNode,'[data-role="search-input"]',"keydown",(function(t){e.multisearchHandlers.handleKeyDown(t)})),j(this.baseNode,'[data-role="search-input"]',"keyup",(function(t){e.multisearchHandlers.handleKeyUp(t)})),this.store.emitter.on(h.isExpandedChanged,(function(){e.multisearchHandlers.renderHeaderChips(),e.initChipListeners()})),this.store.emitter.on(l.phrasesChanged,(function(){e.multisearchHandlers.renderHeaderChips(),e.initChipListeners(),e.multisearchHandlers.phrasesChanged()})))}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function jr(e){for(var t=e.currentTarget;!t.dataset||!t.dataset.phrase;)t=t.parentNode;return t?decodeURIComponent(t.dataset.phrase):null}var Sr=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseNode=t,this.store=r,this.multisearch=new yr(r,n),this.cookieMonster=n,this.inputError=!1}var r;return(r=[{key:"renderHeaderChips",value:function(){var e=this.baseNode.querySelectorAll('[data-role="chip-header"]');Array.prototype.forEach.call(e,(function(e){e.parentNode.removeChild(e)}));var t=this.baseNode.querySelector('[data-role="search-input"]'),r=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e&&t&&n.length>0){var s=n[0],i=decodeURIComponent(s.value),a="",o=n.length-1;return n.length>1&&(a=J()(rt(),ut,lt,"_d25db_1O-cC",o,1===(r=o)?"fraza":r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?"frazy":"fraz")),J()(tt(),ct,s.value,lt,i,i,a)}return""}(!0,!this.store.data.suggester.isExpanded,this.store.data.search.phrases);t.insertAdjacentHTML("beforebegin",r)}},{key:"editPhrase",value:function(e){e&&e.stopPropagation&&e.stopPropagation();var t=decodeURIComponent(this.store.data.search.phrase);if(!this.store.isPhrasesFull()||!t){var r=jr(e);this.cookieMonster.sendChipEditEvent(r),r&&(this.store.removeFromPhrases(r),null!=t&&this.store.addToPhrases(t),this.store.setPhrase(r)),this.validatePhrases()}}},{key:"removePhrase",value:function(e){e&&e.stopPropagation&&e.stopPropagation();var t=jr(e);this.cookieMonster.sendChipRemoveEvent(t),t&&(this.store.removeFromPhrases(t),this.store.updateSuggestions(this.store.data.search.phrase)),this.validatePhrases()}},{key:"addPhraseFromInput",value:function(e){e&&e.stopPropagation&&e.stopPropagation();var t=decodeURIComponent(this.store.data.search.phrase);t&&(this.cookieMonster.sendAddChipEvent(t),this.store.addToPhrases(t),this.store.setPhrase("")),this.validatePhrases()}},{key:"phrasesChanged",value:function(){if(t.opbox&&t.opbox.changeParams instanceof Function&&this.store.data.search.isMultisearchPage){var e=this.store.data.search.phrases.map((function(e){return decodeURIComponent(e.value)}));t.opbox.changeParams([{name:"phrases",value:e}])}}},{key:"handleKeyDown",value:function(e){switch(e.keyCode||e.which){case 186:case 59:case 9:e.preventDefault(),this.store.isPhrasesFull()||this.addPhraseFromInput(e)}}},{key:"handleKeyUp",value:function(e){13!==e.keyCode&&this.validatePhrases()}},{key:"validatePhrases",value:function(){""!==this.store.data.search.phrase&&this.store.isPhrasesFull()?this.inputError||(this.baseNode.querySelector('[data-role="search-form"]').classList.add("_d25db_2Q5bp"),this.cookieMonster.sendChipOverflowEvent(),this.inputError=!0):this.inputError&&(this.baseNode.querySelector('[data-role="search-form"]').classList.remove("_d25db_2Q5bp"),this.inputError=!1)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,r),e}(),Tr=function(){function e(){var t=this,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).baseNode;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"onData",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.phrase,n=void 0===r?"":r,s=e.includeDescription,i=e.phrases,a=void 0===i?[]:i;t.store.data.search.phrase!==n&&0===a.length&&t.store.setPhrase(n,!0),t.store.data.searchInDescriptions!==s&&t.store.changeSearchInDescription(s),""===n&&0===a.length&&(t.store.changeBooleanProperty("suggester","isExpanded",!1),t.searchHandlers.toggleRemoveQuery())})),this.boxName=r.getAttribute("data-box-name"),this.baseNode=r,this.store=new G(this.baseNode),this.cookieMonster=new Or(this.baseNode,this.store),this.searchInDescriptionsListeners=new W(this.baseNode,this.store,this.cookieMonster),this.suggester=new mt(this.baseNode,this.store,this.searchInDescriptionsListeners),this.searchForm=new kr(this.baseNode,this.store,this.cookieMonster),this.suggesterHandlers=new kt(this.store,this.searchForm,this.cookieMonster),this.multisearchHandlers=new Sr(this.baseNode,this.store,this.cookieMonster),this.suggesterListeners=new wt(this.baseNode,this.store,this.suggester,this.suggesterHandlers,this.multisearchHandlers,this.cookieMonster),this.searchHandlers=new _r(this.baseNode,this.store,this.searchForm,this.cookieMonster),this.filtersListeners=new wr(this.baseNode,this.store,this.cookieMonster),this.searchListeners=new Er(this.baseNode,this.store,this.searchHandlers,this.suggesterHandlers,this.searchForm),this.multisearch=new xr(this.baseNode,this.store,this.multisearchHandlers,this.suggesterHandlers)}var t;return(t=[{key:"onMount",value:function(){this.suggesterListeners.init(),this.filtersListeners.init(),this.searchListeners.init(),this.multisearch.init()}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function Lr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rr="toggle-multisearch",Ir=function(){function e(){var r=this,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).baseNode;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Lr(this,"onData",(function(e){r.search.onData(e)})),Lr(this,"eventHandler",(function(e){if(r.search.suggesterListeners.unmount(),!0===e.detail.isChecked&&!1===r.isMultisearch){r.baseNode.innerHTML=r.multiserachVariantCode;var t=r.search.store.data.search.phrase;r.search=new Tr({baseNode:r.baseNode}),r.search.onMount(),r.search.store.removeAllPhrases(),t&&(r.search.store.addToPhrases(decodeURIComponent(t),!0),r.cookieMoster.sendAddChipEvent(t)),r.search.store.setPhrase("",!0),r.isMultisearch=!0}else if(!1===e.detail.isChecked&&!0===r.isMultisearch){r.baseNode.innerHTML=r.standardVariantCode;var n=r.search.store.data.search.phrases[0]?r.search.store.data.search.phrases[0].value:"";r.search=new Tr({baseNode:r.baseNode}),r.search.onMount(),r.search.store.removeAllPhrases(),r.search.store.setPhrase(decodeURIComponent(n),!0),r.isMultisearch=!1}})),this.baseNode=n,!this.multiserachVariantCode){var s=n.querySelector('[data-role="'.concat(vr,'"]')),i=n.querySelector('[data-role="'.concat(gr,'"]'));s?(this.standardVariantCode=n.innerHTML,this.multiserachVariantCode=s.innerHTML,this.isMultisearch=!1):(this.multiserachVariantCode=n.innerHTML,this.standardVariantCode=i.innerHTML,this.isMultisearch=!0)}t.addEventListener(Rr,this.eventHandler),this.search=new Tr({baseNode:n}),this.cookieMoster=new Or(n,this.search.store)}var r;return(r=[{key:"onMount",value:function(){this.search.onMount(),t.opbox&&t.opbox.onData&&t.opbox.onData(this.search.boxName,this.onData),t.opbox&&t.opbox.performance&&t.opbox.performance.markTimeToInteractive&&t.opbox.performance.markTimeToInteractive()}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,r),e}();t.opbox.component.register({prototypeName:"allegro.metrumHeader.search"},Ir)},"fbh+":function(e,t,r){!function(e){function t(e,t){return t.indexOf(e)}function r(e){return encodeURIComponent(e)}function n(e){try{return decodeURIComponent(e)}catch(t){return e}}function s(e){for(var r=e.split("&"),s={},i=0;i<r.length;i++){var a=r[i],o=t("=",a),c=[];-1!==o?c.push(a.substr(0,o),a.substr(o+1)):c.push(a),c[1]&&t("+",c[1])>-1&&(c[1]=c[1].replace(/\+/g," "));var u=-1!==t("%",c[0])?n(c[0]):c[0],l=c[1]?-1!==t("%",c[1])?n(c[1]):c[1]:"";Array.isArray(s[u])?s[u].push(l):s[u]=s.hasOwnProperty(u)?[s[u],l]:l}return s}e.stringify=function(e,t){var n=e.protocol;void 0===n&&(n="http");var s=e.host;void 0===s&&(s="");var i=e.path;void 0===i&&(i=[]);var a=e.query;void 0===a&&(a={});var o=e.hash;void 0===t&&(t={});var c="";s&&(c+=""===n?"//":n+"://",c+=s),i.length>0&&(c+="/"+i.join("/"));var u=Object.keys(a);return u.length>0&&(t.compareFunction&&u.sort(t.compareFunction),c+="?"+u.map((function(e){var t=r(e);return Array.isArray(a[e])?a[e].map((function(e){return t+"="+r(e)})).join("&"):a[e]?t+"="+r(a[e]):r(e)})).join("&")),o&&(c+="#"+o),c},e.parse=function(e){var r=function(e){return 0===t("//",e)?"":0===t("https://",e)?"https":"http"}(e),n=function(e){var t=/([^\/]*:?\/\/)?([^\/^?]*)([^?]*)?/.exec(e);if(t)return[t[2],t[3]?t[3].split("/").filter((function(e){return e})):[]]}(e),i=n[0],a=n[1],o=function(e){var r=t("?",e),n=-1!==r&&e.slice(r+1);if(!n)return[{},""];var i=t("#",n);if(-1===i)return[s(n),""];var a=n.slice(0,i),o=n.slice(i+1);return[s(a),o]}(e);return{protocol:r,host:i,path:a,query:o[0],hash:o[1]}}}(t)},ji7g:function(e,t){var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},n=RegExp(Object.keys(r).join("|"),"g");function s(e,t){return null==t&&(t=","),e.length<=0?new i([""],[]):new i([""].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(r=Array(e.length-1).fill(t))||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),[""]),e);var r}var i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parts=t,this._subs=r}var t;return(t=[{key:"_escapeHtml",value:function(t){return t instanceof e?t:Array.isArray(t)?s(t,""):(t+"").replace(n,(function(e){return r[e]}))}},{key:"toString",value:function(){var e=this;return this._parts.reduce((function(t,r,n){var s=e._subs[n-1];return t+e._escapeHtml(s)+r}))}},{key:"inspect",value:function(){return"".concat(this.constructor.name," '").concat(this.toString(),"'")}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new i(e,r)}Object.assign(a,{safe:function(e){return new i([e+""],[])},join:s}),e.exports=a},xxrt:function(e){e.exports=JSON.parse('{"c":"_13q9y","e":"_8tsq7","f":"_8hkto","d":"_1q2ua","g":"_9f0v0","j":"_1wmuz","G":"_u2xi2","k":"_con24","l":"_11cms","r":"_1bo4a","o":"_mitvy","s":"_lsy4e","p":"_1mfty","t":"_zhp8y","q":"_1u1ui","u":"_12fk0","v":"_d7szm","y":"_kiiea","w":"_sizcr","x":"_yxrn4","z":"_i0b9e","A":"_nem5f","B":"_1x8cc","C":"_1av8u","D":"_1k1qw","E":"_4fx7t","F":"_14uqc","H":"_1o9j9","I":"_1t9p2","J":"_18vat","S":"_1fwkl","R":"_qdoeh","U":"_k70df","V":"_r65gb","T":"_1q5je","W":"_1h7wt","Z":"_1dd5x","Y":"_9hx3e","X":"_1vx3o","ab":"_7qjq4","a":"_1jusk","b":"_v39zd","i":"_pj3fi","h":"_10glw","L":"_2xzg1","Q":"_g1gnj","O":"_1fkm6","K":"_1sql3","M":"_1bwbg","P":"_1yk0g","N":"_1us1q","bb":"_1gocf","m":"_gst97","n":"_46j8q"}')}})}))}(0,"undefined"!=typeof window?window:global);